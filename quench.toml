# Quench configuration for gasboat (Go â€” K8s agent controller + Slack bridge)
# Run `quench config` for reference documentation
version = 1

[git]
baseline = "notes"

[git.commit]
check = "error"

[ratchet]
check = "error"
coverage = true
escapes = true

# --- Checks ---

[check.cloc]
check = "warn"
# Baseline: grandfather current large files, ratchet prevents new ones
max_lines = 800         # podmanager/manager.go is 709
max_lines_test = 500    # split: reconciler_drift_test.go=480, decisions_test.go=472
max_tokens = 6000
exclude = [
  "helm/**",
  "images/**",
  "tests/e2e/**",
]

[check.escapes]
check = "error"

[[check.escapes.patterns]]
name = "panic"
pattern = "\\bpanic\\("
action = "comment"
comment = "// PANIC:"
in_tests = "allow"
advice = "Add a // PANIC: comment explaining why panic is acceptable here."

[check.agents]
check = "warn"
files = ["CLAUDE.md"]
required = ["CLAUDE.md"]
max_lines = false
max_tokens = false
sync = false

[check.docs]
check = "warn"

[check.docs.toc]
check = "warn"
include = ["**/*.md"]
exclude = ["helm/**"]

[check.docs.links]
check = "warn"
include = ["**/*.md"]
exclude = ["helm/**"]

[check.tests]
check = "warn"
auto = true

[check.tests.commit]
check = "warn"
scope = "branch"
exclude = ["**/main.go", "helm/**", "images/**"]

[[check.tests.suite]]
runner = "go"

[check.tests.time]
check = "warn"

[check.license]
check = "off"

# --- Languages ---

[golang]
source = ["**/*.go"]
tests = ["**/*_test.go"]
ignore = ["vendor/"]

[golang.cloc]
check = "warn"

[golang.suppress]
check = "comment"

[golang.suppress.test]
check = "allow"

[shell]
cloc.check = "warn"
