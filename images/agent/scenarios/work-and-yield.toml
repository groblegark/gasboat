# work-and-yield.toml
#
# Claudeless scenario: Simulates a full agent work cycle
#
# This scenario exercises the complete agent lifecycle:
#   1. Agent receives initial nudge, checks workflow
#   2. Agent does some "work"
#   3. Agent creates a decision checkpoint
#   4. Agent yields for human response
#
# Use for E2E testing of the decision gate system, mux integration,
# and the full stop-hook → yield → resume flow.

[claude]
session_id = "00000000-0000-4000-a000-000000000002"
username = "mock-agent"
permission_mode = "accept-edits"
trusted = true
logged_in = true

[claude.timeouts]
hook_timeout_ms = 15000

# ── Initial nudge: check workflow ───────────────────────────────────
[[responses]]
on = { contains = "gb ready" }
say = "Let me check my workflow and start working. Running gb ready... Steps: 1. Review assigned bead 2. Implement changes 3. Create decision checkpoint"

# ── Do some work ────────────────────────────────────────────────────
[[responses]]
on = { contains = "Implement" }
say = "I'll create a test file to simulate work. Work output saved to /tmp/mock-work.txt."

# ── Create decision and yield ───────────────────────────────────────
[[responses]]
on = { contains = "decision" }
say = "Work complete. Creating a decision checkpoint and yielding for human response."

# ── Post-yield acknowledgment ───────────────────────────────────────
[[responses]]
on = "*"
say = "Received instruction. Continuing with next task."

[default]
say = "Mock agent ready for next instruction."

[tools]
mode = "live"

[tools.Bash]
approve = true
